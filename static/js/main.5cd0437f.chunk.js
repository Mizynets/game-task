(window["webpackJsonpgame-task"]=window["webpackJsonpgame-task"]||[]).push([[0],{12:function(e,t,a){e.exports={gamePagePosition:"GamePage_gamePagePosition__2IBJI",spinner:"GamePage_spinner__JtBXH",gamePage:"GamePage_gamePage__1z6kX",gameInterface:"GamePage_gameInterface__27DMK",leaderBoard:"GamePage_leaderBoard__3E1Q8"}},14:function(e,t,a){e.exports={leaderList:"LeaderList_leaderList__3x3h5",list:"LeaderList_list__2SgrW",item:"LeaderList_item__2Xw1h"}},18:function(e,t,a){e.exports={leaderListItem:"LeaderListItem_leaderListItem__1XS4v",itemText:"LeaderListItem_itemText__3Luxi"}},3:function(e,t,a){e.exports={gameInterface:"GameInterface_gameInterface__1VzE9",actionBlock:"GameInterface_actionBlock__2ADmr",select:"GameInterface_select__2idNh",inputName:"GameInterface_inputName__2xh-4",btn:"GameInterface_btn__2buLp",messageText:"GameInterface_messageText__3Ylop",message:"GameInterface_message__2sVxg",fieldList:"GameInterface_fieldList__35dVk"}},32:function(e,t,a){},34:function(e,t,a){e.exports={loader:"Spinner_loader__2FPad",load6:"Spinner_load6__17uPi",round:"Spinner_round__1z0Re"}},37:function(e,t,a){e.exports=a(65)},4:function(e,t,a){e.exports={list:"FieldList_list__2KJcx",initialItem:"FieldList_initialItem__14Ybm",item:"FieldList_item__2XoUw",item_basis_5:"FieldList_item_basis_5__G5m2J",item_basis_10:"FieldList_item_basis_10__3gZrt",item_basis_15:"FieldList_item_basis_15__1WJCf"}},42:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(16),i=a.n(s),l=(a(42),a(15)),c=a(6),o=a(7),m=a(10),u=a(8),d=a(11),p=a(12),f=a.n(p),g=a(3),_=a.n(g),h=a(4),v=a.n(h),S=a(9),C=a.n(S),E=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).createClasses=function(e){var t=+e;return 5===t?"".concat(v.a.item_basis_5):10===t?"".concat(v.a.item_basis_10):15===t?"".concat(v.a.item_basis_15):null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.propertiesList,a=e.selectValue,r=e.isUserSelected,s=e.isSelected,i=e.isComputerSelected,l=e.selectedUser,c=this.createClasses(a),o=t.map(function(e,t){return n.a.createElement("li",{onClick:l,"data-id":t,key:C()(),className:"".concat(v.a.item," ").concat(c),style:{background:r(e)?"forestgreen":i(e)?"red":s(e)?"gray":"white"}})});return n.a.createElement("div",{className:v.a.fieldList},n.a.createElement("ul",{className:v.a.list},o))}}]),t}(r.Component),O=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectValue,a=e.propertiesList,r=e.inputName,s=e.handleChangeSelect,i=e.handleChangeInputName,l=e.onHandlePlay,c=e.gameMode,o=e.startGame,m=e.isUserSelected,u=e.isSelected,d=e.isComputerSelected,p=e.selectedUser,f=e.winnerMassage,g=e.buttonValue,h=!(t.length>0&&r.trim().length>0)||!!(t.length>0&&r.trim().length>0)&&o;return n.a.createElement("div",{className:_.a.gameInterface},n.a.createElement("div",{className:_.a.actionBlock},n.a.createElement("select",{className:_.a.select,value:t,onChange:s},n.a.createElement("option",{defaultValue:!0},"Pick game mode"),n.a.createElement("option",{value:c.easyMode.field},"Easy Mode"),n.a.createElement("option",{value:c.normalMode.field},"Normal Mode"),n.a.createElement("option",{value:c.hardMode.field},"Hard Mode")),n.a.createElement("input",{className:_.a.inputName,type:"text",placeholder:"Enter your name",value:r,onChange:i}),n.a.createElement("button",{disabled:h,className:_.a.btn,onClick:l},g)),n.a.createElement("div",{className:_.a.message},n.a.createElement("p",{className:_.a.messageText},f)),n.a.createElement("div",{className:_.a.fieldList},n.a.createElement(E,{propertiesList:a,selectValue:t,isUserSelected:m,isSelected:u,isComputerSelected:d,selectedUser:p})))}}]),t}(r.Component),b=a(32),y=a.n(b),N=a(14),I=a.n(N),L=a(18),w=a.n(L),P=function(e){var t=e.name,a=e.date;return n.a.createElement("div",{className:w.a.leaderListItem},n.a.createElement("span",{className:w.a.itemText},t),n.a.createElement("span",{className:w.a.itemText},a))},k=function(e){var t=e.list,a=t.length?t.map(function(e){var t=e.name,a=e.date;return n.a.createElement("li",{key:C()(),className:I.a.item},n.a.createElement(P,{name:t,date:a}))}):[];return n.a.createElement("div",{className:I.a.leaderList},n.a.createElement("h2",{className:I.a.title},"Leader Board"),n.a.createElement("ul",{className:I.a.list},a))},A=function(e){var t=e.list;return n.a.createElement("div",{className:y.a.LeaderBoard},n.a.createElement(k,{list:t}))},G=a(17),M=a(22),j=a.n(M),D=function(e){return{type:"FETCH_ERROR",payload:e}},x=a(34),T=a.n(x),U=function(){return n.a.createElement("div",{className:T.a.loader})},V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={inputName:"",selectValue:"",winner:"",startGame:!1,gameOver:!1,randomArr:null,propertiesItemArr:[],resetGame:!1,leader:[]},a.i=0,a.createItemPropertiesArr=function(){var e=+a.state.selectValue,t=e?Array(Math.pow(e,2)).fill().map(function(){return{id:C()(),isSelected:!1,isCurrentUserSelected:!1,isComputerSelected:!1}}):[];a.setState({propertiesItemArr:t})},a.componentDidMount=function(){(0,a.props.thunkCreaterGetModes)(),a.createItemPropertiesArr()},a.componentDidUpdate=function(e,t){t.selectValue!==a.state.selectValue?a.createItemPropertiesArr():t.gameOver!==a.state.gameOver&&a.setState({resetGame:!0})},a.handleChangeInputName=function(e){return a.setState({inputName:e.target.value})},a.handleChangeSelect=function(e){return a.setState({selectValue:e.target.value})},a.onHandlePlay=function(){var e=a.state,t=e.resetGame,r=e.gameOver,n=e.selectValue;if(t&&(a.i=0,a.setState({inputName:"",selectValue:"",gameOver:!1,randomArr:null,propertiesItemArr:[],resetGame:!1,startGame:!1})),!r){a.setState({startGame:!0});var s=a.getDelay(n),i=Math.pow(+n,2);a.getRandomArr(i),setTimeout(a.selectedCell,s)}},a.isCurrentUserSelectedChecker=function(e){return e.isCurrentUserSelected},a.isComputerSelectedChecker=function(e){return e.isComputerSelected},a.isSelectedChecker=function(e){return e.isSelected},a.createLeaderList=function(){var e=[{name:a.state.winner,date:JSON.stringify((new Date).toLocaleString())}];a.setState(function(t){return{leader:[].concat(e,Object(l.a)(t.leader))}})},a.getDelay=function(e){var t=a.props.gameMode,r=+e;return 5===r?t.easyMode.delay:10===r?t.normalMode.delay:15===r?t.hardMode.delay:null},a.getRandomArr=function(e){var t=a.state.randomArr,r=Array(e).fill().map(function(e,t){return t});t||a.setState({randomArr:r.sort(function(){return Math.random()-.5})})},a.stopGame=function(){var e=a.state,t=e.propertiesItemArr,r=e.inputName,n=t.filter(function(e){return e.isCurrentUserSelected}),s=t.filter(function(e){return e.isComputerSelected}),i=null,l=!1;n.length>Math.floor(t.length/2)?(i=r,l=!0):s.length>Math.floor(t.length/2)&&(i="computer",l=!0),l&&a.setState({gameOver:l,winner:i,startGame:!1})},a.selectedCell=function(){var e=a.state,t=e.propertiesItemArr,r=e.randomArr,n=e.selectValue,s=e.gameOver;if(a.stopGame(),!s){var i=a.getDelay(n),c=Object(l.a)(t);c[r[a.i++]].isSelected=!0,a.setState({propertiesItemArr:c}),a.timer=setTimeout(a.selectedComputer,i)}},a.selectedUser=function(e){var t=a.state,r=t.propertiesItemArr,n=t.selectValue,s=t.gameOver;if(a.stopGame(),!s){var i=a.getDelay(n),c=e.currentTarget.dataset.id,o=Object(l.a)(r);o.findIndex(function(e){return e.isSelected&&!e.isCurrentUserSelected&&!e.isComputerSelected})===+c&&(clearTimeout(a.timer),o[c].isCurrentUserSelected=!0,a.setState({propertiesItemArr:o}),setTimeout(a.selectedCell,i))}},a.selectedComputer=function(){var e=a.state,t=e.propertiesItemArr,r=e.selectValue,n=e.gameOver,s=e.inputName,i=e.winner,c=a.props.thunkCreaterPostWinner;a.stopGame(),n&&(a.createLeaderList(),c(i===s?JSON.stringify({winner:s,data:new Date}):JSON.stringify({winner:"computer",data:new Date})));var o=a.getDelay(r),m=Object(l.a)(t),u=m.findIndex(function(e){return e.isSelected&&!e.isCurrentUserSelected&&!e.isComputerSelected});m[u].isComputerSelected=!0,a.setState({propertiesItemArr:m}),setTimeout(a.selectedCell,o)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.inputName,a=e.selectValue,r=e.startGame,s=e.propertiesItemArr,i=e.gameOver,l=e.leader,c=this.props,o=c.loading,m=c.gameMode;if(o)return n.a.createElement("div",{className:f.a.spinner},n.a.createElement(U,null));var u=s.filter(function(e){return e.isCurrentUserSelected}),d=s.filter(function(e){return e.isComputerSelected}),p=u.length>Math.floor(s.length/2)?"".concat(t," Win"):d.length>Math.floor(s.length/2)?"Computer Win":0===s.length||0===t.length?"Inputs should be full":"Game",g=i?"PLAY AGAIN":"PLAY";return n.a.createElement("div",{className:f.a.gamePagePosition},n.a.createElement("div",{className:f.a.gamePage},n.a.createElement("div",{className:f.a.gameInterface},n.a.createElement(O,{inputName:t,propertiesList:s,selectValue:a,gameMode:m,handleChangeSelect:this.handleChangeSelect,handleChangeInputName:this.handleChangeInputName,onHandlePlay:this.onHandlePlay,startGame:r,isUserSelected:this.isCurrentUserSelectedChecker,isSelected:this.isSelectedChecker,isComputerSelected:this.isComputerSelectedChecker,selectedUser:this.selectedUser,winnerMassage:p,buttonValue:g})),n.a.createElement("div",{className:f.a.leaderBoard},n.a.createElement(A,{list:l}))))}}]),t}(r.Component),F={thunkCreaterGetModes:function(){return function(e){e({type:"FETCH_LOADED"}),j.a.get("http://starnavi-frontend-test-task.herokuapp.com/game-settings").then(function(t){return e({type:"FETCH_MODES",payload:t.data})}).catch(function(t){return e(D(t))})}},thunkCreaterPostWinner:function(e){return function(t){t({type:"FETCH_LOADED"}),j.a.post("http://starnavi-frontend-test-task.herokuapp.com/winners",e).then(function(e){return t({type:"POST_WINNER"})}).catch(function(e){return t(D(e))})}}},H=Object(G.b)(function(e){return{loading:e.loading,gameMode:e.gameMode}},F)(V),B=function(){return n.a.createElement(H,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=a(13),J=a(35),W=a(36);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach(function(t){Object(W.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var z={gameMode:null,loading:!0,err:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"FETCH_LOADED":return Y({},e,{loading:!0});case"FETCH_ERROR":return{gameMode:null,loading:!1,err:r};case"FETCH_MODES":return Y({},e,{gameMode:r,loading:!1});case"POST_WINNER":return Y({},e,{loading:!1});default:return e}},Q=Object(R.c)(K,Object(R.a)(J.a));i.a.render(n.a.createElement(G.a,{store:Q},n.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.5cd0437f.chunk.js.map